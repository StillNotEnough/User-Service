# User Service (Spring Boot + JWT + PostgreSQL)

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ **JWT —Ç–æ–∫–µ–Ω—ã**.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –∏–º–µ—é—Ç—Å—è –∞–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT
- –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: **USER**, **ADMIN**
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - `POST /api/v1/auth/signup` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `POST /api/v1/auth/login` ‚Äî –≤—Ö–æ–¥
  - `GET /api/v1/users/me` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `PUT /api/v1/users/me` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `GET /api/v1/users/admin/**` ‚Äî –∞–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–ª—É—á–∏—Ç—å –ø–æ id –∏ —Ç.–¥.)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ß–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build
```

- —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: **http://localhost:8081**  
- PostgreSQL –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É **5433**

---

### 2. –õ–æ–∫–∞–ª—å–Ω–æ –≤ IntelliJ IDEA
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL (—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É `userservice_db`).  
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` (—Å–º. –Ω–∏–∂–µ).  
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `UserServiceApplication`.  

---

## üîë –§–∞–π–ª `.env.example`

```env
# Database
DB_USER=your_username
DB_PASSWORD=your_password
DB_URL=jdbc:postgresql://localhost:5432/your_db_name

# JWT
JWT_SECRET=your_super_secret_key
JWT_EXPIRATION=3600
```

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –∏ –ø–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è.

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–µ–∫
- **Java 17**
- **Spring Boot 3**
- **Spring Security (JWT)**
- **Spring Data JPA + PostgreSQL**
- **Lombok, ModelMapper**
- **JUnit5, Mockito**
- **Docker, Docker Compose**

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
```bash
./mvnw test
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
 ‚îî‚îÄ‚îÄ main/java/com/amazingshop/personal/userservice
      ‚îú‚îÄ‚îÄ config        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Web + Security 
      ‚îú‚îÄ‚îÄ controllers   # REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã + GlobalException
      ‚îú‚îÄ‚îÄ dto           # –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
      ‚îú‚îÄ‚îÄ enums         # enum
      ‚îú‚îÄ‚îÄ models        # –°—É—â–Ω–æ—Å—Ç–∏
      ‚îú‚îÄ‚îÄ repositories  # –¥–æ—Å—Ç—É–ø –∫ –ë–î
      ‚îú‚îÄ‚îÄ security      # JWT –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
      ‚îú‚îÄ‚îÄ services      # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
      ‚îî‚îÄ‚îÄ util          # –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏, –æ—Ç–≤–µ—Ç—ã
```

---

## üîë –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```http
POST /api/v1/auth/signup
Content-Type: application/json

{
  "username": "newUser",
  "password": "password123",
  "email": "user@example.com"
}
```

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "token": "jwt-token",
  "expiresIn": 3600,
  "type": "Bearer",
  "username": "newUser"
}
```
